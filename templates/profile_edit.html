<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">


    <title>update my profile - Bootdey.com</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">


</head>
<body>
{% block nav %}
{% include 'navbar.html' %}
{% endblock %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/profileEdit.css')}}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css"
      integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin="anonymous"/>
<div class="container">
    <div class="row">
        <div class="col-12">

            <div class="my-5">

                <hr>
            </div>

            <form class="file-upload" action="{{ url_for('profile_edit') }}" method="post" novalidate enctype="multipart/form-data">
                {{ form.csrf_token }}
                <div class="row mb-5 gx-5">

                    <div class="col-xxl-8 mb-5 mb-xxl-0">
                        <div class="bg-secondary-soft px-4 py-5 rounded">
                            <div class="row g-3">
                                <h4 class="mb-4 mt-0">Contact detail</h4>

                                <div class="col-md-6">
                                    <label class="form-label">Name </label>
                                    {{ form.name(class="form-control" ) }}
                                    {% for error in form.name.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>


                                <div class="col-md-6">
                                    <label class="form-label">Mobile number </label>
                                    {{ form.phn_no(class="form-control" ) }}
                                    {% for error in form.phn_no.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                    {% if error_phn %}
                                    <p class="help-block text-danger">{{ error_phn }}</p>
                                    {% endif %}


                                </div>

                                <div class="col-md-6 ">
                                    <label for="inputEmail4" class="form-label">Email </label>
                                    {{ form.email(class="form-control block-cursor" , disabled="disabled") }}
                                    {% for error in form.name.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Skype </label>
                                    {{ form.skype(class="form-control" ) }}
                                    {% for error in form.skype.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xxl-4">
                        <div class="bg-secondary-soft px-4 py-5 rounded">
                            <div class="row g-3">
                                <h4 class="mb-4 mt-0">Upload your profile photo</h4>
                                <div class="text-center">
                                    <div class="square position-relative display-2 mb-3">
                                        <label for="customFile">
                                            <img id="profileImage" src="{{ profile_image_url }}" alt="Profile Image"
                                                 class="resize-photo">
                                        </label>
                                        <input type="file" id="customFile" name="image_data" hidden>
                                    </div>
                                    <label class="btn btn-success-soft btn-block" for="customFile"
                                           onclick="uploadPhoto()">Upload</label>
                                    <button type="button" class="btn btn-danger-soft" onclick="removePhoto()">Remove
                                    </button>
                                    <p class="text-muted mt-3 mb-0"><span class="me-1">Note:</span>Minimum size 300px x
                                        300px</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script>
  function uploadPhoto() {
    const fileInput = document.getElementById("customFile");
    fileInput.click();
  }

  function handleFileUpload() {
    const fileInput = document.getElementById("customFile");
    const file = fileInput.files[0];
    const reader = new FileReader();

    reader.onload = function(e) {
      const image = document.getElementById("profileImage");
      image.src = e.target.result;
      image.classList.add("uploaded-photo");
    };

    reader.readAsDataURL(file);
  }

  function removePhoto() {
    const image = document.getElementById("profileImage");
    image.src = "{{ profile_image_url }}";
    image.classList.remove("uploaded-photo");
    const fileInput = document.getElementById("customFile");
    fileInput.value = "";
  }

  const fileInput = document.getElementById("customFile");
  fileInput.addEventListener("change", handleFileUpload);

                    </script>


                </div>

                <div class="row mb-5 gx-5">
                    <div class="col-xxl-6 mb-5 mb-xxl-0">
                        <div class="bg-secondary-soft px-4 py-5 rounded">
                            <div class="row g-3">
                                <h4 class="mb-4 mt-0">Social media detail</h4>

                                <div class="col-md-6">
                                    <label class="form-label"><i class="fab fa-fw fa-facebook me-2 text-facebook"></i>Facebook
                                    </label>
                                    {{ form.facebook(class="form-control" ) }}
                                    {% for error in form.facebook.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label"><i class="fab fa-fw fa-twitter text-twitter me-2"></i>Twitter
                                    </label>
                                    {{ form.twitter(class="form-control" ) }}
                                    {% for error in form.twitter.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label"><i
                                            class="fab fa-fw fa-linkedin-in text-linkedin me-2"></i>Linkedin </label>
                                    <{{ form.linkedin(class="form-control" ) }}
                                    {% for error in form.linkedin.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label"><i class="fab fa-fw fa-instagram text-instagram me-2"></i>Instagram
                                    </label>
                                    {{ form.instagram(class="form-control" ) }}
                                    {% for error in form.instagram.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="col-xxl-6">
                        <div class="bg-secondary-soft px-4 py-5 rounded">
                            <div class="row g-3">
                                <h4 class="my-4">User Authentication</h4>

                                <div class="col-md-12">
                                     {{ form.change_password(class_="form-check-input", id="checkChangePassword") }}
                                    <label class="form-check-label" for="checkChangePassword">Would you like to change your password?</label>

                                </div>

                                <div class="col-md-6">
                                    <label for="new_Password" class="form-label" id="label_new_Password">New
                                        password</label>
                                    {{ form.new_password(class="form-control", id="new_Password") }}
                                    {% for error in form.new_password.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                    {% if error_pass %}
                                    <p class="help-block text-danger">{{ error_pass }}</p>
                                    {% endif %}
                                </div>


                                <div class="col-md-6">
                                    <label for="confirm_Password" class="form-label" id="label_confirm_Password">Confirm
                                        Password</label>
                                    {{ form.confirm_password(class="form-control",id="confirm_Password") }}
                                    {% for error in form.confirm_password.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                    {% if error_pass %}
                                    <p class="help-block text-danger">{{ error_pass }}</p>
                                    {% endif %}
                                </div>

                                <div class="col-md-12">
                                    <label for="exampleInputPassword3" class="form-label">Current Password</label>
                                    {{ form.password(class="form-control", placeholder="Password",id="exampleInputPassword3") }}
                                    {% for error in form.password.errors %}
                                    <p class="help-block text-danger">{{ error }}</p>
                                    {% endfor %}
                                    {% if wrong_pass %}
                                    <p class="help-block text-danger">{{ wrong_pass }}</p>
                                    {% endif %}

                                </div>
                            </div>
                        </div>
                    </div>

                    <script>
                            var changePasswordCheckbox = document.getElementById("checkChangePassword");
                            var newPassword = document.getElementById("new_Password");
                            var confirmPassword = document.getElementById("confirm_Password");
                            var label_new_Password = document.getElementById("label_new_Password");
                            var label_confirm_Password = document.getElementById("label_confirm_Password");

                            changePasswordCheckbox.addEventListener("change", function() {
                                if (this.checked) {
                                    label_new_Password.style.display = "block";
                                    label_confirm_Password.style.display = "block";
                                    newPassword.style.display = "block";
                                    confirmPassword.style.display = "block";
                                } else {
                                    label_new_Password.style.display = "none";
                                    label_confirm_Password.style.display = "none";
                                    newPassword.style.display = "none";
                                    confirmPassword.style.display = "none";
                                }

                                // Save the checkbox state to localStorage
                                localStorage.setItem("changePasswordCheckbox", this.checked);
                            });

                            // Retrieve the checkbox state from localStorage on page load
                            var storedCheckboxState = localStorage.getItem("changePasswordCheckbox");
                            if (storedCheckboxState === "true") {
                                changePasswordCheckbox.checked = true;
                                label_new_Password.style.display = "block";
                                label_confirm_Password.style.display = "block";
                                newPassword.style.display = "block";
                                confirmPassword.style.display = "block";
                            } else {
                                changePasswordCheckbox.checked = false;
                                label_new_Password.style.display = "none";
                                label_confirm_Password.style.display = "none";
                                newPassword.style.display = "none";
                                confirmPassword.style.display = "none";
                            }


                    </script>


                </div>

                <div class="gap-3 d-md-flex justify-content-md-end text-center">
                    <button type="button" class="btn btn-danger btn-lg">Delete profile</button>
                    <button type="submit" class="btn btn-primary btn-lg">Update profile</button>
                </div>
                <br>
            </form>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script type="text/javascript">


</script>
</body>
</html>